<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Pandas & Numpy</title>
</head>
<body>
<div id="wmd-preview" class="wmd-preview"><div class="md-section-divider"></div><div class="md-section-divider"></div><h1 data-anchor-id="fy7l" id="pandas-numpy">Pandas &amp; Numpy</h1><p data-anchor-id="yime"><code>machine_learning</code></p><div class="md-section-divider"></div><h2 data-anchor-id="wu0a" id="pandas-basic-application-of-series-dataframe">Pandas: basic application of Series &amp; DataFrame</h2><div class="md-section-divider"></div><h3 data-anchor-id="d73e" id="1-preparation">1. preparation</h3><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="2x8h" style=""><ol class="linenums"><li class="L0"><code class="language-python"><span class="kwd">import</span><span class="pln"> pandas </span><span class="kwd">as</span><span class="pln"> pd</span></code></li><li class="L1"><code class="language-python"><span class="kwd">from</span><span class="pln"> pandas </span><span class="kwd">import</span><span class="pln"> </span><span class="typ">Series</span><span class="pun">,</span><span class="typ">DataFrame</span></code></li></ol></pre><div class="md-section-divider"></div><h3 data-anchor-id="ellg" id="2-series">2. Series</h3><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="8eda" style=""><ol class="linenums"><li class="L0"><code class="language-python"><span class="pln">ser </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Series</span><span class="pun">([</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">])</span><span class="pln"> </span><span class="com"># with array</span></code></li><li class="L1"><code class="language-python"><span class="pln">ser </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Series</span><span class="pun">([</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">4</span><span class="pun">],</span><span class="pln">index </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'c'</span><span class="pun">,</span><span class="str">'d'</span><span class="pun">])</span><span class="pln"> </span></code></li><li class="L2"><code class="language-python"><span class="pln">ser </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Series</span><span class="pun">({</span><span class="str">'p'</span><span class="pun">:</span><span class="lit">1</span><span class="pun">,</span><span class="str">'a'</span><span class="pun">:</span><span class="lit">2</span><span class="pun">,</span><span class="str">'n'</span><span class="pun">:</span><span class="lit">3</span><span class="pun">})</span><span class="pln">  </span><span class="com"># with  dictionary</span></code></li><li class="L3"><code class="language-python"><span class="pln">ser</span><span class="pun">.</span><span class="pln">values </span></code></li><li class="L4"><code class="language-python"><span class="pln">ser</span><span class="pun">.</span><span class="pln">index</span></code></li><li class="L5"><code class="language-python"><span class="pln">ser</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="com"># call by default index</span></code></li><li class="L6"><code class="language-python"><span class="pln">ser</span><span class="pun">[</span><span class="str">'b'</span><span class="pun">]</span><span class="pln"> </span><span class="com"># call by my index(s)</span></code></li><li class="L7"><code class="language-python"><span class="pln">ser</span><span class="pun">[[</span><span class="str">'a'</span><span class="pun">,</span><span class="str">'c'</span><span class="pun">]]</span><span class="pln"> </span></code></li><li class="L8"><code class="language-python"><span class="pln">pd</span><span class="pun">.</span><span class="pln">isnull</span><span class="pun">(</span><span class="pln">ser</span><span class="pun">)</span><span class="pln">  </span><span class="com"># check not-a-number</span></code></li><li class="L9"><code class="language-python"><span class="pln">pd</span><span class="pun">.</span><span class="pln">notnull</span><span class="pun">(</span><span class="pln">ser</span><span class="pun">)</span></code></li><li class="L0"><code class="language-python"><span class="pln">ser</span><span class="pun">.</span><span class="pln">isnull</span><span class="pun">()</span></code></li><li class="L1"><code class="language-python"><span class="pln">ser</span><span class="pun">.</span><span class="pln">notnull</span><span class="pun">()</span></code></li><li class="L2"><code class="language-python"></code></li><li class="L3"><code class="language-python"><span class="pln">ser1 </span><span class="pun">+</span><span class="pln"> ser2 </span><span class="com"># add value with the same index</span></code></li><li class="L4"><code class="language-python"><span class="pln">ser</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">'python'</span><span class="pln"> </span><span class="com"># set the name of the series</span></code></li><li class="L5"><code class="language-python"><span class="pln">ser</span><span class="pun">.</span><span class="pln">index</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">'index name'</span><span class="pln"> </span><span class="com"># set the name of the index columne</span></code></li><li class="L6"><code class="language-python"><span class="pln">ser</span><span class="pun">.</span><span class="pln">index </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'v'</span><span class="pun">]</span><span class="pln"> </span><span class="com"># change indexs</span></code></li></ol></pre><div class="md-section-divider"></div><h3 data-anchor-id="kqya" id="3-dataframe">3. DataFrame</h3><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="hat1" style=""><ol class="linenums"><li class="L0"><code><span class="pln">dic </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="str">'cla'</span><span class="pun">:[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">4</span><span class="pun">],</span><span class="str">'colb'</span><span class="pun">:[</span><span class="lit">2</span><span class="pun">,</span><span class="lit">4</span><span class="pun">,</span><span class="lit">6</span><span class="pun">,</span><span class="lit">8</span><span class="pun">],</span><span class="str">'col3'</span><span class="pun">:[</span><span class="lit">3</span><span class="pun">,</span><span class="lit">5</span><span class="pun">,</span><span class="lit">7</span><span class="pun">,</span><span class="lit">9</span><span class="pun">]}</span></code></li><li class="L1"><code><span class="pln">f </span><span class="pun">=</span><span class="pln"> </span><span class="typ">DataFrame</span><span class="pun">(</span><span class="pln">dic</span><span class="pun">)</span></code></li><li class="L2"><code><span class="pln">f </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">dic</span><span class="pun">,</span><span class="pln">columns </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'id'</span><span class="pun">,</span><span class="str">'num'</span><span class="pun">,</span><span class="str">'rank'</span><span class="pun">],</span><span class="pln">index </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'a'</span><span class="pun">,</span><span class="str">'b'</span><span class="pun">,</span><span class="str">'c'</span><span class="pun">,</span><span class="str">'d'</span><span class="pun">])</span></code></li><li class="L3"><code><span class="pln">f </span><span class="pun">=</span><span class="pln"> </span><span class="typ">DataFrame</span><span class="pun">({</span><span class="str">'dic1'</span><span class="pun">:{</span><span class="lit">1</span><span class="pun">:</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">:</span><span class="lit">4</span><span class="pun">},</span><span class="str">'dic2'</span><span class="pun">:{</span><span class="lit">1</span><span class="pun">:</span><span class="lit">3</span><span class="pun">,</span><span class="lit">2</span><span class="pun">:</span><span class="lit">6</span><span class="pun">}})</span></code></li><li class="L4"><code></code></li><li class="L5"><code><span class="pln">f</span><span class="pun">[</span><span class="str">'id'</span><span class="pun">]</span></code></li><li class="L6"><code><span class="pln">f</span><span class="pun">.</span><span class="pln">id   </span><span class="com"># without [ ]</span></code></li><li class="L7"><code><span class="pln">f</span><span class="pun">.</span><span class="pln">ix</span><span class="pun">[</span><span class="str">'a'</span><span class="pun">]</span><span class="pln"> </span><span class="com"># row index with ix</span></code></li><li class="L8"><code><span class="pln">f</span><span class="pun">.</span><span class="pln">ix</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span></code></li><li class="L9"><code></code></li><li class="L0"><code><span class="pln">f</span><span class="pun">[</span><span class="str">'rank'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> numpy</span><span class="pun">.</span><span class="pln">arange</span><span class="pun">(</span><span class="lit">5</span><span class="pun">)</span></code></li><li class="L1"><code><span class="pln">f</span><span class="pun">[</span><span class="str">'rank'</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Series</span><span class="pun">([</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">4</span><span class="pun">]，</span><span class="pln">index </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="str">'?'</span><span class="pun">,</span><span class="str">'/'</span><span class="pun">,</span><span class="str">'!'</span><span class="pun">])</span></code></li><li class="L2"><code><span class="kwd">del</span><span class="pln"> f</span><span class="pun">[</span><span class="str">'rank'</span><span class="pun">]</span></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="pln">f</span><span class="pun">.</span><span class="pln">columns</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">'name'</span></code></li><li class="L5"><code><span class="pln">f</span><span class="pun">.</span><span class="pln">columns</span><span class="pun">.</span><span class="pln">tolist</span><span class="pun">()</span><span class="pln"> returns the list of column names</span><span class="pun">.</span></code></li><li class="L6"><code></code></li><li class="L7"><code><span class="pln">f</span><span class="pun">.</span><span class="pln">index</span><span class="pun">.</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">'info'</span></code></li><li class="L8"><code><span class="pln">f</span><span class="pun">.</span><span class="pln">values</span></code></li><li class="L9"><code></code></li><li class="L0"><code><span class="pln">df</span><span class="pun">[</span><span class="pln">val</span><span class="pun">]</span><span class="pln"> </span></code></li><li class="L1"><code><span class="pln">df</span><span class="pun">.</span><span class="pln">ix</span><span class="pun">[</span><span class="pln">val</span><span class="pun">]</span><span class="pln">  </span></code></li><li class="L2"><code><span class="pln">df</span><span class="pun">.</span><span class="pln">ix</span><span class="pun">[:,</span><span class="pln">val</span><span class="pun">]</span><span class="pln">    </span></code></li><li class="L3"><code><span class="pln">df</span><span class="pun">.</span><span class="pln">ix</span><span class="pun">[</span><span class="pln">val1</span><span class="pun">,</span><span class="pln">val2</span><span class="pun">]</span></code></li></ol></pre><p data-anchor-id="a43e">icol、irow 方法 <br>
get_value、set_value 方法  </p><div class="md-section-divider"></div><h3 data-anchor-id="857k" id="4methods-for-pandas">4.Methods for  Pandas</h3><p data-anchor-id="ob1d">describe    针对 Series 或各 DataFrame 列计算汇总统计 <br>
mean    值的平均数 <br>
count   非 NA 值的数量 <br>
min、max 计算最小值和最大值 <br>
cumsum  样本值的累计和 <br>
argmin、argmax   计算能够获取到最小值和最大值的索引位置（整数） <br>
median  值的算术中位数（50%分位数） <br>
idxmin、idxmax   计算能够获取到最小值和最大值的索引值 <br>
sum 值的总和 <br>
var 样本值的方差 <br>
std 样本值的标准差 <br>
diff    计算一阶差分（对时间序列很有用）</p><p data-anchor-id="v90k">quantile    计算样本的分位数（0到1） <br>
mad 根据平均值计算平均绝对离差 <br>
skew    样本值的偏度（三阶矩） <br>
kurt    样本值的峰度（四阶矩） <br>
cummin、cummax   样本值的累计最大值和累计最小值 <br>
cumprod 样本值的累计积 <br>
pct_change  计算百分数变化 <br>
axis    简约的轴。DataFrame 的行用0，列用1 <br>
skipna  排除缺失值，默认值为 True <br>
level   如果轴是层次化索引的（即 MultiIndex），则根据 level 分组约简</p><div class="md-section-divider"></div><h2 data-anchor-id="z11m" id="scikit-learn-machine-learning">Scikit-Learn Machine Learning</h2><div class="md-section-divider"></div><h3 data-anchor-id="iv4i" id="1-concept">1. concept:</h3><ol data-anchor-id="pjbx">
<li>ML considers how to predict some characteristic of the unknown data by a set of data sample.</li>
<li>classification: <br>
<ul><li>supervised learning:  <br>
the sample data carrys the part we want to predict. it can be devided into: <br>
<em>Classification</em>: the sample belongs to two or more classes. we predict the type of unknown data by learning sample of known classes. <br>
<em>Regression</em>: hope to output continue variables</li>
<li>unsupervised learning: <br>
sample data contains no objective value. it aims to mine similar parts from the data to form different groups - cluster(聚类). Or find the density distribution of input space <br>
of data, which means density assumption. Or reduce dimension for data visualization.</li></ul></li>
<li>use what we learn from <strong>train set</strong> to predict <strong>test set</strong></li>
</ol><div class="md-section-divider"></div><h3 data-anchor-id="3mcz" id="2-basic-operations">2. basic operations:</h3><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="7dml" style=""><ol class="linenums"><li class="L0"><code><span class="kwd">from</span><span class="pln"> sklearn </span><span class="kwd">import</span><span class="pln"> datasets</span></code></li><li class="L1"><code><span class="pln">iris </span><span class="pun">=</span><span class="pln"> datasets</span><span class="pun">.</span><span class="pln">load_iris</span><span class="pun">()</span></code></li><li class="L2"><code><span class="pln">iris</span><span class="pun">.</span><span class="pln">data</span><span class="pun">.</span><span class="pln">shape  </span><span class="com"># see how data stored</span></code></li><li class="L3"><code><span class="pln">iris</span><span class="pun">.</span><span class="pln">target</span><span class="pun">.</span><span class="pln">shape  </span><span class="com"># see how types stored</span></code></li><li class="L4"><code><span class="kwd">import</span><span class="pln"> numpy </span><span class="kwd">as</span><span class="pln"> np</span></code></li><li class="L5"><code><span class="pln">np</span><span class="pun">.</span><span class="pln">unique</span><span class="pun">(</span><span class="pln">iris</span><span class="pun">.</span><span class="pln">target</span><span class="pun">)</span><span class="pln">  </span><span class="com"># show all types</span></code></li></ol></pre><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="t0h9" style=""><ol class="linenums"><li class="L0"><code><span class="pln">digit </span><span class="pun">=</span><span class="pln"> dataset</span><span class="pun">.</span><span class="pln">load_digits</span><span class="pun">()</span></code></li><li class="L1"><code><span class="kwd">print</span><span class="pun">(</span><span class="pln">digit</span><span class="pun">.</span><span class="pln">data</span><span class="pun">)</span></code></li><li class="L2"><code><span class="pln">digit</span><span class="pun">.</span><span class="pln">target</span></code></li></ol></pre><div class="md-section-divider"></div><h3 data-anchor-id="v5yz" id="3learn-and-predict">3.learn and predict</h3><p data-anchor-id="5zsv">in scikit-learn, <strong>estimator</strong> is a python object which implements fix(x,y) and predict(T) method. <br>
class <strong>sklearn.svm.SVC</strong> is an estimator supporting vector classification. we treat it as a black box regardless of the detailed algorithm and chosen of paramaters.</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="1q0l" style=""><ol class="linenums"><li class="L0"><code><span class="kwd">from</span><span class="pln"> sklearn </span><span class="kwd">import</span><span class="pln"> svm</span></code></li><li class="L1"><code><span class="pln">clf </span><span class="pun">=</span><span class="pln"> svm</span><span class="pun">.</span><span class="pln">SVC</span><span class="pun">(</span><span class="pln">gamma</span><span class="pun">=</span><span class="lit">0.001</span><span class="pun">,</span><span class="pln">C</span><span class="pun">=</span><span class="lit">100.</span><span class="pun">)</span></code></li><li class="L2"><code><span class="com"># set gammar manually </span></code></li><li class="L3"><code><span class="com"># we can find better parameters with node serach(格点搜索) and cross verification(交叉验证)</span></code></li></ol></pre><p data-anchor-id="izgu">pass the train set to fit method for data fitting. here we take the last one as prediction and the remain as train data</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="hmr2" style=""><ol class="linenums"><li class="L0"><code><span class="pln">clf</span><span class="pun">.</span><span class="pln">fit</span><span class="pun">(</span><span class="pln">digit</span><span class="pun">.</span><span class="pln">data</span><span class="pun">[:-</span><span class="lit">1</span><span class="pun">],</span><span class="pln">digit</span><span class="pun">.</span><span class="pln">target</span><span class="pun">[:-</span><span class="lit">1</span><span class="pun">])</span></code></li></ol></pre><p data-anchor-id="ex7n">the output is </p><p data-anchor-id="sq45"><code>SVC(C=100.0, cache_size=200, class_weight=None, coef0=0.0, degree=3,gamma=0.001, kernel='rbf', max_iter=-1, probability=False, random_state=None, shrinking=True, tol=0.001, verbose=False) <br>
</code> <br>
again</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="5h1w" style=""><ol class="linenums"><li class="L0"><code><span class="pln">clf</span><span class="pun">.</span><span class="pln">predict</span><span class="pun">(</span><span class="pln">digit</span><span class="pun">.</span><span class="pln">data</span><span class="pun">[-</span><span class="lit">1</span><span class="pun">])</span></code></li></ol></pre><p data-anchor-id="nb9m">output: <br>
    <code>array([8])</code></p><div class="md-section-divider"></div><h3 data-anchor-id="pzon" id="4regression">4.Regression</h3><p data-anchor-id="y1at">in regression model, objective value is the linear combination of input value. <br>
y(w,x) = w0+w1x1+w2x2+...+wpxp <br>
w = (w_1,w_2,...,w_p) is coef_（因数） <br>
w_0 is intercept(截距) <br>
least square method(最小二乘法) minimize residual（残差）</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="vak9" style=""><ol class="linenums"><li class="L0"><code><span class="kwd">from</span><span class="pln"> sklearn </span><span class="kwd">import</span><span class="pln"> linear_model</span></code></li><li class="L1"><code><span class="pln">clf </span><span class="pun">=</span><span class="pln"> linear_model</span><span class="pun">.</span><span class="typ">LinearRegression</span><span class="pun">()</span></code></li><li class="L2"><code><span class="pln">clf</span><span class="pun">.</span><span class="pln">fit</span><span class="pun">([[</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">],[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,])</span></code></li><li class="L3"><code><span class="pln">clf</span><span class="pun">.</span><span class="pln">coef_</span></code></li></ol></pre><p data-anchor-id="k2cr">output: <br>
<code>array([0.5,0.5])</code></p><div class="md-section-divider"></div><h3 data-anchor-id="hiz4" id="5-classification">5. Classification</h3><p data-anchor-id="vmxx">the simplest algorithm is nearest-neighbor: given a new data, take the tag of the nearest sample in N-dimension space as its tag.</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="6jf2" style=""><ol class="linenums"><li class="L0"><code><span class="kwd">from</span><span class="pln"> sklearn </span><span class="kwd">import</span><span class="pln"> neighbors</span></code></li><li class="L1"><code><span class="pln">knn </span><span class="pun">=</span><span class="pln"> neighbors</span><span class="pun">.</span><span class="typ">KNeighborsClassifier</span><span class="pun">()</span></code></li><li class="L2"><code><span class="pln">knn</span><span class="pun">.</span><span class="pln">fit</span><span class="pun">(</span><span class="pln">iris</span><span class="pun">.</span><span class="pln">data</span><span class="pun">,</span><span class="pln">iris</span><span class="pun">.</span><span class="pln">target</span><span class="pun">)</span></code></li><li class="L3"><code><span class="pln">knn</span><span class="pun">.</span><span class="pln">predict</span><span class="pun">([[]</span><span class="lit">0.1</span><span class="pun">,</span><span class="lit">0.2</span><span class="pun">,</span><span class="lit">0.3</span><span class="pun">,</span><span class="lit">0.4</span><span class="pun">])</span></code></li></ol></pre><p data-anchor-id="pqp5">output: <br>
<code>array([0])</code></p><div class="md-section-divider"></div><h3 data-anchor-id="65zw" id="6-cluster">6. Cluster</h3><p data-anchor-id="6w3v">The simpest cluster algorithm is k-means: classify data into k types, allocate a sample into a type according to the distance between the sample and average value of all the current samples of the type.  <br>
With each sample adding in, average value keeps renewing until the type reaches convergence after several turns(determined by <code>max_iter</code>).</p><div class="md-section-divider"></div><h2 data-anchor-id="wb14" id="numpy-basic-operations">Numpy basic operations</h2><p data-anchor-id="10ic"><code>import numpy as np</code></p><div class="md-section-divider"></div><h3 data-anchor-id="6xi1" id="1-numeric-types">1. numeric types</h3><ul data-anchor-id="krxl">
<li>bool </li>
<li>inti, int8,int16,int32,int64</li>
<li>uint8,uint16,uint32,uint64</li>
<li>float,float16,float32,float64</li>
<li>complex,complex64,complex128 <br>
<code>complex(1,2)</code></li>
</ul><div class="md-section-divider"></div><h3 data-anchor-id="mn3m" id="2-numpy-array-object">2. Numpy array object</h3><ul data-anchor-id="apes">
<li>consists of two parts: the actual data and some describing metadata</li>
<li>basic APIs:</li>
</ul><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="y98s" style=""><ol class="linenums"><li class="L0"><code><span class="pln">a </span><span class="pun">=</span><span class="pln"> np</span><span class="pun">.</span><span class="pln">arange</span><span class="pun">(</span><span class="lit">10</span><span class="pun">)</span><span class="pln"> </span><span class="com">#   to generate ordered numbers</span></code></li><li class="L1"><code><span class="pln">a </span><span class="pun">=</span><span class="pln"> np</span><span class="pun">.</span><span class="pln">array</span><span class="pun">([</span><span class="pln">np</span><span class="pun">.</span><span class="pln">arange</span><span class="pun">(</span><span class="lit">3</span><span class="pun">),</span><span class="pln">np</span><span class="pun">.</span><span class="pln">arange</span><span class="pun">(</span><span class="lit">3</span><span class="pun">)])</span></code></li><li class="L2"><code></code></li><li class="L3"><code><span class="pln">a</span><span class="pun">.</span><span class="pln">dtype </span><span class="com"># check the data type</span></code></li><li class="L4"><code><span class="pln">a</span><span class="pun">.</span><span class="pln">dtype</span><span class="pun">.</span><span class="pln">itemsize </span></code></li><li class="L5"><code></code></li><li class="L6"><code><span class="pln">a</span><span class="pun">.</span><span class="pln">shape </span><span class="com"># check dimension with tuple</span></code></li><li class="L7"><code></code></li><li class="L8"><code><span class="pln">a</span><span class="pun">[</span><span class="lit">2</span><span class="pun">,</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="com"># visit element</span></code></li></ol></pre><ul data-anchor-id="8t55">
<li>one-dimensional slicing and indexing: the same as python list</li>
</ul><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="k7pt" style=""><ol class="linenums"><li class="L0"><code><span class="pln">a</span><span class="pun">[</span><span class="lit">3</span><span class="pun">:</span><span class="lit">7</span><span class="pun">]</span><span class="pln">  </span><span class="com"># slice </span></code></li><li class="L1"><code><span class="pln">a</span><span class="pun">[:</span><span class="lit">7</span><span class="pun">:</span><span class="lit">2</span><span class="pun">]</span><span class="pln">  </span><span class="com"># with increment</span></code></li><li class="L2"><code><span class="pln">a</span><span class="pun">[::-</span><span class="lit">1</span><span class="pun">]</span><span class="pln">  </span><span class="com"># reverse</span></code></li></ol></pre><ul data-anchor-id="qiqg">
<li>manipulating array shapes  <br>
<ul><li>Reshape.</li></ul></li>
</ul><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="vxgv" style=""><ol class="linenums"><li class="L0"><code><span class="pln">ma </span><span class="pun">=</span><span class="pln"> ar</span><span class="pun">.</span><span class="pln">reshape</span><span class="pun">(</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">4</span><span class="pun">)</span></code></li><li class="L1"><code><span class="pln">ar</span><span class="pun">.</span><span class="pln">shape </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">4</span><span class="pun">)</span></code></li></ol></pre><ul data-anchor-id="ozzc">
<li>Resize.</li>
</ul><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="v1yq" style=""><ol class="linenums"><li class="L0"><code><span class="pln">ar</span><span class="pun">.</span><span class="pln">resize</span><span class="pun">(</span><span class="lit">3</span><span class="pun">,</span><span class="lit">81</span><span class="pun">)</span></code></li><li class="L1"><code><span class="com"># same as reshape() but change the array itself</span></code></li></ol></pre><p data-anchor-id="vqna">flatten &amp; ravel</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="xuz2" style=""><ol class="linenums"><li class="L0"><code><span class="pln">ma</span><span class="pun">.</span><span class="pln">flatten</span><span class="pun">()</span></code></li><li class="L1"><code><span class="pln">ma</span><span class="pun">.</span><span class="pln">ravel</span><span class="pun">()</span></code></li><li class="L2"><code><span class="com"># push multidimension into one</span></code></li></ol></pre><p data-anchor-id="358l">transpose <br>
<code>ma.transpose()</code></p><ul data-anchor-id="r5mo">
<li><h3 id="stacking-array">stacking array</h3>

<ul><li>horizontal stacking <br>
<code>np.hstack( (a,b) )</code> <br>
<code>np.concatenate( (a,b) ,axis=1)</code></li>
<li>vertical stacking <br>
<code>np.vstack( (a,b) )</code> <br>
<code>np.comcatenate( (a,b) ,axis=0)</code></li>
<li>depth stacking by dimension  <br>
<code>np.dstack( (a,b) )</code></li></ul></li>
<li><h3 id="splitting-numpy-array">splitting Numpy array</h3>

<ul><li>horizontal splitting: into arraies </li></ul></li>
</ul><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="i8eh" style=""><ol class="linenums"><li class="L0"><code><span class="pln">a </span><span class="pun">=</span><span class="pln"> np</span><span class="pun">.</span><span class="pln">array</span><span class="pun">([</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">]，[</span><span class="lit">3</span><span class="pun">,</span><span class="lit">4</span><span class="pun">,</span><span class="lit">5</span><span class="pun">]，[</span><span class="lit">6</span><span class="pun">,</span><span class="lit">7</span><span class="pun">,</span><span class="lit">8</span><span class="pun">])</span></code></li><li class="L1"><code><span class="pln">np</span><span class="pun">.</span><span class="pln">hsplit</span><span class="pun">(</span><span class="pln">a</span><span class="pun">,</span><span class="lit">3</span><span class="pun">)</span></code></li></ol></pre><ul data-anchor-id="6v4q">
<li>vertical splitting</li>
</ul><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="ox0o" style=""><ol class="linenums"><li class="L0"><code><span class="pln">np</span><span class="pun">.</span><span class="pln">vsplit</span><span class="pun">(</span><span class="pln">a</span><span class="pun">,</span><span class="lit">3</span><span class="pun">)</span></code></li></ol></pre><ul data-anchor-id="ulnc">
<li>depth-wise splitting:each columne from each dimension</li>
</ul><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="cucf" style=""><ol class="linenums"><li class="L0"><code><span class="pln">c </span><span class="pun">=</span><span class="pln"> np</span><span class="pun">.</span><span class="pln">arange</span><span class="pun">(</span><span class="lit">27</span><span class="pun">).</span><span class="pln">reshape</span><span class="pun">(</span><span class="lit">3</span><span class="pun">,</span><span class="lit">3</span><span class="pun">,</span><span class="lit">3</span><span class="pun">)</span></code></li><li class="L1"><code><span class="pln">np</span><span class="pun">.</span><span class="pln">dsplit</span><span class="pun">(</span><span class="pln">c</span><span class="pun">,</span><span class="lit">3</span><span class="pun">)</span></code></li></ol></pre><div class="md-section-divider"></div><h3 data-anchor-id="3kzz" id="array-attributes">array attributes:</h3><p data-anchor-id="7cle"><code># b is an numpy array</code> <br>
<code>b.ndim</code> check the number of dimensions <br>
<code>b.size</code> holds the count of elements <br>
<code>b.itemsize</code>returns the count of bytes for each element <br>
<code>b.nbytes</code> returns the total bytes (=size*itemsize) <br>
<code>b.T</code> the same as b.transpose() <br>
complex number can be held like: <br>
<code>c = array([1.+2.j,3.+4.j])</code> <br>
<code>c.real</code> and <code>c.imag</code> show the real and imaginary part respectively <br>
make it flat: <br>
<code>f = b.flat</code> gives back a <strong>numpy.flatiter</strong> object which can be used to iterate each element</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="41p1" style=""><ol class="linenums"><li class="L0"><code><span class="kwd">for</span><span class="pln"> item </span><span class="kwd">in</span><span class="pln"> f</span><span class="pun">:</span></code></li><li class="L1"><code><span class="pln">    </span><span class="kwd">print</span><span class="pln"> item</span></code></li></ol></pre><p data-anchor-id="tqzy">obtain elements with flatiter object: <br>
<code>b.flat[2]</code>  <code>b.flat[[1,3]]</code></p><ul data-anchor-id="5bvr">
<li><h3 id="converting-array-to-list">converting array to list</h3>

<p><code>b.tolist()</code></p></li>
<li><h3 id="array-views-and-copies">array views and copies</h3>

<p>views in Numpy are not read only and cannot protect the underlying information</p></li>
</ul><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="h0ta" style=""><ol class="linenums"><li class="L0"><code><span class="kwd">import</span><span class="pln"> scipy</span><span class="pun">.</span><span class="pln">misc</span></code></li><li class="L1"><code><span class="kwd">import</span><span class="pln"> matplotlib</span><span class="pun">.</span><span class="pln">pyplot </span><span class="kwd">as</span><span class="pln"> plt</span></code></li><li class="L2"><code><span class="pln">lena </span><span class="pun">=</span><span class="pln"> scipy</span><span class="pun">.</span><span class="pln">misc</span><span class="pun">.</span><span class="pln">lena</span><span class="pun">()</span><span class="pln"> </span><span class="com"># a picture</span></code></li><li class="L3"><code><span class="pln">lena</span><span class="pun">.</span><span class="pln">copy</span><span class="pun">()</span></code></li><li class="L4"><code><span class="pln">lena</span><span class="pun">.</span><span class="pln">view</span><span class="pun">()</span></code></li><li class="L5"><code><span class="pln">plt</span><span class="pun">.</span><span class="pln">subplot</span><span class="pun">(</span><span class="lit">221</span><span class="pun">)</span></code></li><li class="L6"><code><span class="pln">plt</span><span class="pun">.</span><span class="pln">imshow</span><span class="pun">(</span><span class="pln">lena</span><span class="pun">)</span></code></li><li class="L7"><code><span class="pln">plt</span><span class="pun">.</span><span class="pln">show</span><span class="pun">()</span></code></li></ol></pre><div class="md-section-divider"></div><h3 data-anchor-id="ahwr" id="fancy-indexing">fancy indexing</h3><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="aeau" style=""><ol class="linenums"><li class="L0"><code><span class="kwd">import</span><span class="pln"> scipy</span><span class="pun">.</span><span class="pln">misc</span></code></li><li class="L1"><code><span class="kwd">import</span><span class="pln"> matplotlib</span><span class="pun">.</span><span class="pln">pyplot </span><span class="kwd">as</span><span class="pln"> plt</span></code></li><li class="L2"><code><span class="pln">lena </span><span class="pun">=</span><span class="pln"> scipy</span><span class="pun">.</span><span class="pln">misc</span><span class="pun">.</span><span class="pln">lena</span><span class="pun">()</span><span class="pln"> </span><span class="com"># a picture</span></code></li><li class="L3"><code><span class="pln">xmax </span><span class="pun">=</span><span class="pln"> lena</span><span class="pun">.</span><span class="pln">shape</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span></code></li><li class="L4"><code><span class="pln">ymax </span><span class="pun">=</span><span class="pln"> lena</span><span class="pun">.</span><span class="pln">shape</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span></code></li><li class="L5"><code><span class="pln">lena</span><span class="pun">[</span><span class="pln">range</span><span class="pun">(</span><span class="pln">xmax</span><span class="pun">),</span><span class="pln">range</span><span class="pun">(</span><span class="pln">ymax</span><span class="pun">)]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">  </span><span class="com"># ??</span></code></li><li class="L6"><code><span class="pln">lena</span><span class="pun">[</span><span class="pln">range</span><span class="pun">(</span><span class="pln">xmax</span><span class="pun">-</span><span class="lit">1</span><span class="pun">,-</span><span class="lit">1</span><span class="pun">,-</span><span class="lit">1</span><span class="pun">),</span><span class="pln">range</span><span class="pun">(</span><span class="pln">ymax</span><span class="pun">)]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">  </span><span class="com"># ??</span></code></li><li class="L7"><code><span class="pln">plt</span><span class="pun">.</span><span class="pln">imshow</span><span class="pun">(</span><span class="pln">lena</span><span class="pun">)</span></code></li><li class="L8"><code><span class="pln">plt</span><span class="pun">.</span><span class="pln">show</span><span class="pun">()</span></code></li></ol></pre><ol data-anchor-id="xb7q">
<li>Numpy I/O <br>
read from csv file <br>
<code>np.genfromcsv("file.csv", delimiter=',')</code> <br>
returns a two-dimension array.</li>
</ol></div>
</body>
</html>